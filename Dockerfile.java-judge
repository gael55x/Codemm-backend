FROM eclipse-temurin:17-jdk

WORKDIR /workspace

RUN mkdir -p /opt/junit && \
    curl -L -o /opt/junit/junit-platform-console-standalone.jar https://repo1.maven.org/maven2/org/junit/platform/junit-platform-console-standalone/1.10.2/junit-platform-console-standalone-1.10.2.jar

ENV JUNIT_JAR=/opt/junit/junit-platform-console-standalone.jar

# Compile user code and tests with JUnit on the classpath, then run the console launcher.
ENTRYPOINT ["/bin/bash", "-lc", "javac -cp ${JUNIT_JAR}:. *.java && java -jar ${JUNIT_JAR} --class-path . --scan-classpath --details-theme ascii"]


FROM python:3.11-slim

WORKDIR /workspace

ENV PYTHONDONTWRITEBYTECODE=1 \
    PYTHONUNBUFFERED=1 \
    PYTEST_DISABLE_PLUGIN_AUTOLOAD=1

RUN pip install --no-cache-dir pytest==8.3.4

# Run tests in the mounted /workspace. Use no cache provider to avoid writing.
ENTRYPOINT ["/bin/bash", "-lc", "pytest -q -p no:cacheprovider"]

